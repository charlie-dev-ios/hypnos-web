# Feature Specification: デフォルト食材フィルター選択

**Feature Branch**: `004-default-ingredient-filters`
**Created**: 2026-01-30
**Status**: Draft
**Input**: User description: "料理一覧画面でデフォルトで食材フィルターは全て選択された状態にする"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 料理一覧の初期表示 (Priority: P1)

ユーザーが料理一覧画面を初めて開いたとき、すべての食材フィルターがデフォルトで選択された状態で表示される。これにより、ユーザーは初期状態ですべての料理を閲覧できる。

**Why this priority**: これがこの機能の主要な価値であり、ユーザー体験の基盤となるため最優先。

**Independent Test**: 料理一覧画面にアクセスした際に、すべての食材チェックボックスが選択状態であることを確認できる。

**Acceptance Scenarios**:

1. **Given** ユーザーが料理一覧画面にアクセスする, **When** ページが読み込まれる, **Then** すべての食材フィルターのチェックボックスがチェックされた状態で表示される
2. **Given** 食材フィルターがすべて選択された初期状態, **When** ユーザーが料理一覧を確認する, **Then** すべての料理が表示されている

---

### User Story 2 - 食材フィルターの解除 (Priority: P2)

ユーザーがデフォルトで選択されている食材フィルターから特定の食材のチェックを外すと、その食材を含まない料理のみが表示される。

**Why this priority**: フィルター機能の基本動作として、デフォルト選択状態からのフィルタリングが正しく機能することが重要。

**Independent Test**: チェックを外した食材を含む料理が一覧から除外されることを確認できる。

**Acceptance Scenarios**:

1. **Given** すべての食材が選択された初期状態, **When** ユーザーが特定の食材のチェックを外す, **Then** その食材を含む料理のみが一覧に表示される
2. **Given** 一部の食材のチェックが外れた状態, **When** ユーザーが外したチェックを再度付ける, **Then** その食材を含む料理が再び一覧に表示される

---

### Edge Cases

- 食材が存在しない場合（空のデータセット）どうなるか？→ 食材フィルターセクションは空の状態で表示される
- ブラウザの戻るボタンで画面に戻った場合のフィルター状態は？→ 初期状態（全選択）にリセットされる

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムは料理一覧画面の初期表示時に、すべての利用可能な食材フィルターを選択状態にしなければならない
- **FR-002**: ユーザーは食材フィルターのチェックを外すことで、表示する料理を絞り込めなければならない
- **FR-003**: システムは選択された食材を含む料理のみを一覧に表示しなければならない
- **FR-004**: システムは「選択をクリア」ボタンを押すとすべての食材フィルターの選択が解除されなければならない
- **FR-005**: システムは選択中の食材数を画面上に表示しなければならない

### Key Entities

- **食材（Ingredient）**: 料理に使用される材料。フィルターの選択対象となる
- **料理（Recipe）**: 食材の組み合わせで作られるメニュー。種別（カレー、サラダ、デザート）と必要な食材を持つ
- **食材フィルター**: 食材ごとのチェックボックス。選択状態で対応する食材を含む料理を表示

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ユーザーが料理一覧画面を開いた際、100%の確率ですべての食材フィルターがチェック済みの状態で表示される
- **SC-002**: ページ読み込み完了後、1秒以内にすべての食材フィルターが正しい状態（全選択）で表示される
- **SC-003**: 食材フィルターの操作（チェック/解除）が即座に料理一覧に反映される

## Assumptions

- 現在の実装では食材フィルターの初期状態が「未選択」であり、これを「全選択」に変更する
- 食材データは既存のレシピデータから動的に抽出される
- ページリロードや再訪問時は常に初期状態（全選択）にリセットされる（状態の永続化は行わない）
